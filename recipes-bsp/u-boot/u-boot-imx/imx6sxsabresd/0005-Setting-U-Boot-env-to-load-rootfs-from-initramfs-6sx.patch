From 8343c8de22dd08eefd2738b4e3bd6afb98509810 Mon Sep 17 00:00:00 2001
From: saravanj24 <saravanan.j@jasmin-infotech.com>
Date: Thu, 24 Aug 2023 14:20:16 +0530
Subject: [PATCH] 0005-Setting-U-Boot-env-to-load-rootfs-from-initramfs-6sx

---
 include/configs/mx6sxsabresd.h | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/include/configs/mx6sxsabresd.h b/include/configs/mx6sxsabresd.h
index a0cabe565e..ff38d7ab5b 100644
--- a/include/configs/mx6sxsabresd.h
+++ b/include/configs/mx6sxsabresd.h
@@ -84,6 +84,7 @@
 	"fdt_addr=0x83000000\0" \
 	"tee_addr=0x84000000\0" \
 	"tee_file=uTee-6sxsdb\0" \
+	"initramfs_file=core-image-minimal-initramfs-imx6sxsabresd.cpio.gz\0" \
 	"boot_fdt=try\0" \
 	"ip_dyn=yes\0" \
 	"splashimage=0x8c000000\0" \
@@ -100,6 +101,14 @@
 	"loadimage=fatload mmc ${mmcdev}:${mmcpart} ${loadaddr} ${image}\0" \
 	"loadfdt=fatload mmc ${mmcdev}:${mmcpart} ${fdt_addr} ${fdt_file}\0" \
 	"loadtee=fatload mmc ${mmcdev}:${mmcpart} ${tee_addr} ${tee_file}\0" \
+	"loadinitramfs=fatload mmc ${mmcdev}:${mmcpart} ${initrd_addr} ${initramfs_file}\0" \
+	"initramfskernelboot=echo Booting initramfs  . . .;" \
+                            "setenv fdt_file imx6sx-sdb.dtb; " \
+			    "run mmcargs; " \
+			    "run loadimage; " \
+			    "run loadfdt; " \
+			    "run loadinitramfs; " \
+			    "bootz ${loadaddr} ${initrd_addr}:${filesize} ${fdt_addr};\0" \
 	"mmcboot=echo Booting from mmc ...; " \
 		"run mmcargs; " \
 		"if test ${tee} = yes; then " \
